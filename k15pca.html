<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>DNPlay - K15 PCA</title>
  <meta name="description" content="DNPlay">
  <meta name="author" content="DNPlay">

  <!-- <link rel="stylesheet" href=""> -->
</head>
<body>
<p><b>A modification of the original version found at: </b><a href='https://gen3553.pagesperso-orange.fr/ADN/K15.htm'>https://gen3553.pagesperso-orange.fr/ADN/K15.htm</a></p>
<label for="box_size">Box Size:&nbsp;&nbsp;&nbsp;&nbsp;</label>
<select id="box_size">
<option value="2">2</option>
<option value="4">4</option>
<option value="6">6</option>
<option selected value="8">8</option>
<option value="10">10</option>
<option value="12">12</option>
<option value="14">14</option>
</select>
<br>
<label for="box_color">Box Colour:</label>
<select id="box_color">
<option value="aliceblue">aliceblue</option>
<option value="antiquewhite">antiquewhite</option>
<option value="aqua">aqua</option>
<option value="aquamarine">aquamarine</option>
<option value="azure">azure</option>
<option value="beige">beige</option>
<option value="bisque">bisque</option>
<option value="black">black</option>
<option value="blanchedalmond">blanchedalmond</option>
<option value="blue">blue</option>
<option value="blueviolet">blueviolet</option>
<option value="brown">brown</option>
<option value="burlywood">burlywood</option>
<option value="cadetblue">cadetblue</option>
<option value="chartreuse">chartreuse</option>
<option value="chocolate">chocolate</option>
<option value="coral">coral</option>
<option value="cornflowerblue">cornflowerblue</option>
<option value="cornsilk">cornsilk</option>
<option value="crimson">crimson</option>
<option value="cyan">cyan</option>
<option value="darkblue">darkblue</option>
<option value="darkcyan">darkcyan</option>
<option value="darkgoldenrod">darkgoldenrod</option>
<option value="darkgray">darkgray</option>
<option value="darkgreen">darkgreen</option>
<option value="darkgrey">darkgrey</option>
<option value="darkkhaki">darkkhaki</option>
<option value="darkmagenta">darkmagenta</option>
<option value="darkolivegreen">darkolivegreen</option>
<option value="darkorange">darkorange</option>
<option value="darkorchid">darkorchid</option>
<option value="darkred">darkred</option>
<option value="darksalmon">darksalmon</option>
<option value="darkseagreen">darkseagreen</option>
<option value="darkslateblue">darkslateblue</option>
<option value="darkslategray">darkslategray</option>
<option value="darkslategrey">darkslategrey</option>
<option value="darkturquoise">darkturquoise</option>
<option value="darkviolet">darkviolet</option>
<option value="deeppink">deeppink</option>
<option value="deepskyblue">deepskyblue</option>
<option value="dimgray">dimgray</option>
<option value="dimgrey">dimgrey</option>
<option value="dodgerblue">dodgerblue</option>
<option value="firebrick">firebrick</option>
<option value="floralwhite">floralwhite</option>
<option value="forestgreen">forestgreen</option>
<option value="fuchsia">fuchsia</option>
<option value="gainsboro">gainsboro</option>
<option value="ghostwhite">ghostwhite</option>
<option value="gold">gold</option>
<option value="goldenrod">goldenrod</option>
<option value="gray">gray</option>
<option value="green">green</option>
<option value="greenyellow">greenyellow</option>
<option value="grey">grey</option>
<option value="honeydew">honeydew</option>
<option value="hotpink">hotpink</option>
<option value="indianred">indianred</option>
<option value="indigo">indigo</option>
<option value="ivory">ivory</option>
<option value="khaki">khaki</option>
<option value="lavender">lavender</option>
<option value="lavenderblush">lavenderblush</option>
<option value="lawngreen">lawngreen</option>
<option value="lemonchiffon">lemonchiffon</option>
<option value="lightblue">lightblue</option>
<option value="lightcoral">lightcoral</option>
<option value="lightcyan">lightcyan</option>
<option value="lightgoldenrodyellow">lightgoldenrodyellow</option>
<option value="lightgray">lightgray</option>
<option value="lightgreen">lightgreen</option>
<option value="lightgrey">lightgrey</option>
<option value="lightpink">lightpink</option>
<option value="lightsalmon">lightsalmon</option>
<option value="lightseagreen">lightseagreen</option>
<option value="lightskyblue">lightskyblue</option>
<option value="lightslategray">lightslategray</option>
<option value="lightslategrey">lightslategrey</option>
<option value="lightsteelblue">lightsteelblue</option>
<option value="lightyellow">lightyellow</option>
<option value="lime">lime</option>
<option value="limegreen">limegreen</option>
<option value="linen">linen</option>
<option value="magenta">magenta</option>
<option value="maroon">maroon</option>
<option value="mediumaquamarine">mediumaquamarine</option>
<option value="mediumblue">mediumblue</option>
<option value="mediumorchid">mediumorchid</option>
<option value="mediumpurple">mediumpurple</option>
<option value="mediumseagreen">mediumseagreen</option>
<option value="mediumslateblue">mediumslateblue</option>
<option value="mediumspringgreen">mediumspringgreen</option>
<option value="mediumturquoise">mediumturquoise</option>
<option value="mediumvioletred">mediumvioletred</option>
<option value="midnightblue">midnightblue</option>
<option value="mintcream">mintcream</option>
<option value="mistyrose">mistyrose</option>
<option value="moccasin">moccasin</option>
<option value="navajowhite">navajowhite</option>
<option value="navy">navy</option>
<option value="oldlace">oldlace</option>
<option value="olive">olive</option>
<option value="olivedrab">olivedrab</option>
<option value="orange">orange</option>
<option value="orangered">orangered</option>
<option value="orchid">orchid</option>
<option value="palegoldenrod">palegoldenrod</option>
<option value="palegreen">palegreen</option>
<option value="paleturquoise">paleturquoise</option>
<option value="palevioletred">palevioletred</option>
<option value="papayawhip">papayawhip</option>
<option value="peachpuff">peachpuff</option>
<option value="peru">peru</option>
<option value="pink">pink</option>
<option value="plum">plum</option>
<option value="powderblue">powderblue</option>
<option value="purple">purple</option>
<option value="rebeccapurple">rebeccapurple</option>
<option selected value="red">red</option>
<option value="rosybrown">rosybrown</option>
<option value="royalblue">royalblue</option>
<option value="saddlebrown">saddlebrown</option>
<option value="salmon">salmon</option>
<option value="sandybrown">sandybrown</option>
<option value="seagreen">seagreen</option>
<option value="seashell">seashell</option>
<option value="sienna">sienna</option>
<option value="silver">silver</option>
<option value="skyblue">skyblue</option>
<option value="slateblue">slateblue</option>
<option value="slategray">slategray</option>
<option value="slategrey">slategrey</option>
<option value="snow">snow</option>
<option value="springgreen">springgreen</option>
<option value="steelblue">steelblue</option>
<option value="tan">tan</option>
<option value="teal">teal</option>
<option value="thistle">thistle</option>
<option value="tomato">tomato</option>
<option value="turquoise">turquoise</option>
<option value="violet">violet</option>
<option value="wheat">wheat</option>
<option value="white">white</option>
<option value="whitesmoke">whitesmoke</option>
<option value="yellow">yellow</option>
<option value="yellowgreen">yellowgreen</option>
</select>
<br>
<input type='text' id='coord_text' size='200'>
<br>
<input type='button' id='add' value='Add'>
<input type='button' id='reset' value='Reset'>
<canvas id='pca_canvas'></canvas>
<script src='k15pca.js'></script>
<script>
let canvas = document.getElementById('pca_canvas');
let ctx = canvas.getContext('2d');
let coord_text = document.getElementById('coord_text');
coord_text.value = 'Italy_Calabria,8.07,12.92,4.55,1.98,17.48,15.12,31.66,6.46,0.13,0.11,0.04,0.09,0.36,0.97,0.07';

const image = new Image();
image.src = 'https://i.imgur.com/s6gaGhd.png';
image.onload = () => {
	canvas.height = image.height;
	canvas.width = image.width;
	ctx.drawImage(image, 0, 0);
	setup();
}

function get_vals() {
	let vals = coord_text.value.split(',');
	let sum = 0.0;
	if (vals.length != 16) {
		if (vals.length < 16) {
			alert('Invalid input: Too few values');
		} else {
			alert('Invalid input: Too many values')
		}
		return null;
	}
	for (let i = 1; i < vals.length; ++i) {
		if (isNaN(vals[i])) {
			alert('Invalid input: K15 values must be numeric');
			return null;
		}
		sum += Number(vals[i]);
	}
	if (sum < 99.9 || sum > 100.1) {
		alert('Invalid input: K15 values must add up to 100, you got ' + sum);
		return null;
	}
	return vals;
}

function setup() {
	let add_button = document.getElementById('add');
	add_button.addEventListener('click', (event) => {
		let v = get_vals();
		if (v != null) {
			let coords = calc(v[1],v[2],v[3],v[4],v[5],v[6],v[7],
				v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]);
			let x = coords[0];
			let y = coords[1];
			ctx.fillStyle = document.getElementById('box_color').value;
			let box_size = parseInt(document.getElementById('box_size').value);
			ctx.fillRect(x-(box_size/2), y-(box_size/2), box_size, box_size);
		}
	});

	let reset_button = document.getElementById('reset');
	reset_button.addEventListener('click', (event) => {
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		ctx.drawImage(image, 0, 0);
	});
}
</script>
</body>
</html>
